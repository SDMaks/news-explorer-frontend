!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=53)}({1:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));class i{constructor(e){this.apiRespond=e=>{if(e.ok){return e.json()}return e.json().then(Promise.reject.bind(Promise))},this.signup=(e,t,s)=>fetch(this.url+"/signup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:s})}).then(e=>this.apiRespond(e)),this.signin=(e,t)=>fetch(this.url+"/signin",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(e=>this.apiRespond(e)),this.getUser=()=>fetch(this.url+"/users/me",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(e=>this.apiRespond(e)),this.logOutUser=()=>fetch(this.url+"/logout",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}).then(e=>this.apiRespond(e)),this.createArticle=(e,t,s,i,n,r,o)=>fetch(this.url+"/articles",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword:e,title:t,text:s,date:i,source:n,link:r,image:o})}).then(e=>this.apiRespond(e)),this.deleteArticle=e=>fetch(`${this.url}/articles/${e}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}}).then(e=>this.apiRespond(e)),this.getArticles=()=>fetch(this.url+"/articles",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(e=>this.apiRespond(e)),this.url=e}}},10:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));const i={url:"https://www.api.emnews.students.nomoreparties.space"}},5:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));class i{constructor(e,t,s,i,n,r){this.popUpButtonOpen=e,this.popUpButtonClose=t,this.body=s,this.mask=i,this.menu=n,this.menuButtonLogoOut=r,this.imageValue="./images/logout-white.png",this.imageValueClose="./images/logout-black.png"}setEventListeners(){this.popUpButtonOpen.addEventListener("click",()=>{this.openEventHeader()}),this.popUpButtonClose.addEventListener("click",()=>{this.closeEventHeader()})}openEventHeader(){this.popUpButtonOpen.classList.remove("header__popup-button_active"),this.popUpButtonClose.classList.add("header__popup-button-close_active"),this.menu.classList.add("menu_active"),this.body.classList.add("body_mobile-fixed-popup"),this.mask.classList.add("mobile-popup-mask_active"),this.renderButton()}closeEventHeader(){this.popUpButtonOpen.classList.add("header__popup-button_active"),this.popUpButtonClose.classList.remove("header__popup-button-close_active"),this.menu.classList.remove("menu_active"),this.body.classList.remove("body_mobile-fixed-popup"),this.mask.classList.remove("mobile-popup-mask_active"),this.renderButtonClose()}renderButton(){"save-news"===this.body.id&&window.matchMedia("(max-width: 767px)").matches&&(this.menuButtonLogoOut.src=""+this.imageValue)}renderButtonClose(){"save-news"===this.body.id&&(this.menuButtonLogoOut.src=""+this.imageValueClose)}}},53:function(e,t,s){"use strict";s.r(t);var i=s(7),n=s(6),r=s(5),o=s(1);class a{constructor(e,t,s,i,n,r,o){this.arrKeyWords=e=>{const t=[];e.forEach(e=>(t.push(e.keyword),t));const s=t.reduce((e,t)=>(e[t]?e[t]+=1:e[t]=1,e),{}),i=Object.keys(s);this.numVariantsKeysLength=i.length;const n=Object.values(s).reduce((e,t)=>e+t,0);this.numKeys=n,this.result=s,this.resultTrue(this.result,this.numKeys,this.numVariantsKeysLength)},this.resultTrue=(e,t,s)=>{const i=Object.keys(e);if(0===s)this.noResult();else if(1===s)this.keyNumberSpan.textContent=t,this.firstKey.classList.remove("header__saved-article-key-word-number_disabled"),this.firstKey.textContent=`${i[0][0].toUpperCase()}${i[0].slice(1)}`,this.secondKey.textContent="",this.thirdKey.textContent="";else if(2===s)this.firstKey.classList.remove("header__saved-article-key-word-number_disabled"),this.secondKey.classList.remove("header__saved-article-key-word-number_disabled"),this.firstKey.textContent=`${i[0][0].toUpperCase()}${i[0].slice(1)}`,this.secondKey.textContent=`, ${i[1][0].toUpperCase()}${i[1].slice(1)}`,this.thirdKey.textContent="",this.keyNumberSpan.textContent=t;else if(3===s)this.firstKey.classList.remove("header__saved-article-key-word-number_disabled"),this.secondKey.classList.remove("header__saved-article-key-word-number_disabled"),this.thirdKey.classList.remove("header__saved-article-key-word-number_disabled"),this.firstKey.textContent=`${i[0][0].toUpperCase()}${i[0].slice(1)}`,this.secondKey.textContent=`, ${i[1][0].toUpperCase()}${i[1].slice(1)}`,this.thirdKey.textContent=`, ${i[2][0].toUpperCase()}${i[2].slice(1)}`,this.keyNumberSpan.textContent=t;else if(s>3){const e=i.length-2;this.firstKey.classList.remove("header__saved-article-key-word-number_disabled"),this.secondKey.classList.remove("header__saved-article-key-word-number_disabled"),this.thirdKey.classList.remove("header__saved-article-key-word-number_disabled"),this.firstKey.textContent=`${i[0][0].toUpperCase()}${i[0].slice(1)}`,this.secondKey.textContent=`, ${i[1][0].toUpperCase()}${i[1].slice(1)}`,this.thirdKey.textContent=`и ${e} другим`,this.keyNumberSpan.textContent=t}},this.noResult=()=>{this.keyNumberSpan.textContent="0",this.blockKeyWords.classList.add("header__saved-article-key-word_disabled"),this.noResultSaved.classList.remove("no-result_disabled"),this.newsCardSaved.classList.add("news-card_disabled")},this.keyNumberSpan=t,this.blockKeyWords=s,this.noResultSaved=i,this.firstKey=n,this.secondKey=r,this.thirdKey=o,this.newsCardSaved=e}}var d=s(8),c=s(9),l=s(10);const u=document.querySelector("#save-news"),h=u.querySelector(".menu__list"),_=(h.querySelector("#li-main"),h.querySelector("#li-save-articles-news")),p=h.querySelector("#li-autorization"),m=h.querySelector("#li-log-out-news"),v=h.querySelector(".menu__button-span"),y=(h.querySelector("#menuButton"),h.querySelector("#menuButtonNews")),b=u.querySelector(".header__popup-button"),g=u.querySelector(".header__popup-button-close"),L=u.querySelector(".mobile-popup-mask"),f=u.querySelector(".menu"),C=u.querySelector(".menu__button-logo-out"),w=u.querySelector(".header__saved-article-title-user"),S=u.querySelector(".header__saved-article-title-number"),k=u.querySelector(".header__saved-article-key-word"),E=u.querySelector("#no-result-saved"),x=u.querySelector("#saved-grid"),q=u.querySelector("#first-key"),O=u.querySelector("#second-key"),B=u.querySelector("#third-key"),K=u.querySelector("#news-card-saved");!function(){const e=new o.a(l.a.url),t=new n.a(_,p,m,v,o.a,u),s=new i.a(e,y,t);function h(){I("delEvent")}s.userNameNews(w);const U=new a(K,S,k,E,q,O,B),R=new r.a(b,g,u,L,f,C);R.renderButton(),R.setEventListeners(),R.renderButtonClose(),s.setEventlisenerUser();const A=new d.a(e,(e,t,s,i,n,r,o,a,d,l,u,h)=>new c.a(e,t,s,i,n,r,o,a,d,l,u,h),x);function I(t){e.getArticles().then(s=>{t?t&&U.arrKeyWords(s.data):(U.arrKeyWords(s.data),s.data.forEach(t=>{const s=t.keyword[0].toUpperCase()+t.keyword.slice(1);A.add(s,t.title,t.text,t.date,t.source,t.link,t.image,K,x,e,t._id,h)}))}).catch(e=>{"Нет статей в базе"===e.message?U.noResult():"Нет статей в базе"!==e.message&&alert(e.message)})}I()}()},6:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));class i{constructor(e,t,s,i,n,r){this.userButtonLogIn=e=>{this.menuButtonSpan.textContent=e,this.headerRenderLogIn()},this.userButtonLogOut=()=>{this.menuButtonSpan.textContent=""},this.userNameNews=e=>{this.menuButtonSpan.textContent=e},this.liSaveArticles=e,this.liAutorization=t,this.liLogOut=s,this.menuButtonSpan=i,this.api=n,this.bodyMain=r}headerRenderLogIn(){this.liSaveArticles.classList.remove("log-out"),this.liAutorization.classList.add("log-out"),this.liLogOut.classList.remove("log-out")}headerRenderLogOut(){"main-page"===this.bodyMain.id?(this.liSaveArticles.classList.add("log-out"),this.liAutorization.classList.remove("log-out"),this.liLogOut.classList.add("log-out"),this.userButtonLogOut()):"save-news"===this.bodyMain.id&&(this.userButtonLogOut(),window.location.href="./")}}},7:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));class i{constructor(e,t,s){this.authorizationUser=()=>{this.api.getUser().then(e=>{this.localStorareRecording(e.name,e),this.setEventlisenerUser()}).catch(e=>{alert(e)})},this.authorizationUserLogOut=e=>{if(e.currentTarget.classList.contains("menu__button")){window.confirm("Вы действительно хотите выйти?")&&this.api.logOutUser().then(()=>{this.localStorareClear(),this.headerRender.headerRenderLogOut(),window.location.href="./",this.removeEventlisenerUser()}).catch(e=>{alert(e)})}},this.api=e,this.menuButton=t,this.headerRender=s}localStorareRecording(e,t){window.localStorage.setItem(e,t),window.localStorage.setItem("user",e)}localStorareClear(){window.localStorage.clear()}userNameNews(e){const t=window.localStorage.getItem("user");this.headerRender.userNameNews(t),e.textContent=t}setEventlisenerUser(){this.menuButton.addEventListener("click",()=>this.authorizationUserLogOut(event))}removeEventlisenerUser(){this.menuButton.removeEventListener("click",this.authorizationUserLogOut)}}},8:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));class i{constructor(e,t,s){n.call(this),this.api=e,this._createCardFunction=t,this.newsCardGrid=s}}var n=function(){this.add=(e,t,s,i,n,r,o,a,d,c,l,u)=>{this.card=this._createCardFunction(e,t,s,i,n,r,o,a,d,c,l,u).create(),this.newsCardGrid.appendChild(this.card)}}},9:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));class i{constructor(e,t,s,i,r,o,a,d,c,l,u,h){n.call(this),this.keyword=e,this.title=t,this.text=s,this.date=i,this.source=r,this.link=o,this.image=a,this.section=d,this.gridContainer=c,this.api=l,this.idCard=u,this.renderfunction=h,this.imageValueError="./images/test_1.png",this.messageToLogIn="Войдите, чтобы сохранять статьи",this.idCard=u}setEventListeners(){"news-card-saved"===this.section.id?(this.buttonDeleteSave=this._view.querySelector(".card__button-icon-delete"),this.buttonDeleteSave.addEventListener("click",this.deleteCardeSaved)):"news-card"===this.section.id&&(this._view.querySelector(".card__button-icon_grey").addEventListener("click",this.save),this._view.querySelector(".card__button-icon_greyq").addEventListener("mouseover",this.setEventListenersInfo),this._view.querySelector(".card__button-icon_greyq").addEventListener("mouseout",this.setEventListenersInfoRemoove))}}var n=function(){this.create=()=>{const e=document.createElement("div");e.classList.add("card");const t=document.createElement("a");t.classList.add("card__article-container"),t.setAttribute("target","_blank"),t.setAttribute("href",""+this.link);const s=document.createElement("img");s.classList.add("card__image"),s.setAttribute("alt","картинка к статье"),s.setAttribute("onerror",`this.onerror=null;this.src='${this.imageValueError}';`),s.setAttribute("src",""+this.image);const i=document.createElement("div");i.classList.add("card__button-container"),"news-card-saved"===this.section.id?i.classList.add("card__button-container_position"):"news-card"===this.section.id&&i.classList.add("card__button-container_position-main");const n=document.createElement("p");n.classList.add("card__article-date"),n.textContent=this.date;const r=document.createElement("h2");r.classList.add("card__article-title"),r.textContent=this.title;const o=document.createElement("p");o.classList.add("card__article-text"),o.textContent=this.text;const a=document.createElement("p");a.classList.add("card__article-url"),a.textContent=this.source,t.appendChild(n),t.appendChild(r),t.appendChild(o),t.appendChild(a);const d=document.createElement("span");"news-card"===this.section.id?(d.classList.add("card__button-info_disactive"),d.classList.add("card__button-info"),d.textContent=this.messageToLogIn):"news-card-saved"===this.section.id&&(d.classList.add("card__button-info-card"),d.textContent=this.keyword);const c=document.createElement("button");return"news-card"===this.section.id?(c.classList.add("card__button-icon"),c.classList.add("card__button-icon_grey"),c.classList.add("card__button-icon_greyq")):"news-card-saved"===this.section.id&&(c.classList.add("card__button-icon-delete"),c.id=this.idCard),i.appendChild(d),i.appendChild(c),e.appendChild(i),e.appendChild(s),e.appendChild(t),this._view=e,this.cardButtonIcon=c,this.linkCard=t.getAttribute("href"),this.imageCard=s.getAttribute("src"),this.dateCard=n.textContent,this.titleCard=r.textContent,this.textCard=o.textContent,this.sourceCard=a.textContent,this.keywordCard=this.keyword,this.cardButtonIconCard=c,this.cardButtonInfoCard=d,this.setEventListeners(),this._view},this.deleteCardeSaved=e=>{"card__button-icon-delete"===e.target.className&&this.api.deleteArticle(this.buttonDeleteSave.id).then(()=>{e.target.closest(".card").remove(),this.renderfunction()}).catch(e=>{alert(e)})},this.save=()=>{window.localStorage.getItem("user")&&(this.disactiveDeleteButton=this._view.querySelector(".card__button-icon_grey"),this.button=this._view.querySelector(".card__button-icon"),this.disactiveInfo=this._view.querySelector(".card__button-info_disactive"),this.api.createArticle(this.keywordCard,this.titleCard,this.textCard,this.dateCard,this.sourceCard,this.linkCard,this.imageCard).then(e=>(this.button.id=e.data._id,this.button.classList.add("card__button-icon_blue"),this._view.querySelector(".card__button-icon_grey").removeEventListener("click",this.save),this.button.classList.remove("card__button-icon_grey"),this.buttonDelete=this._view.querySelector(".card__button-icon_blue"),this.buttonDelete)).then(e=>{this.deleteCardEventListener(e)}).catch(e=>{alert(e)}))},this.deleteCardEventListener=e=>{e.addEventListener("click",this.deleteCard)},this.deleteCard=()=>{this.buttonDelete.removeEventListener("click",this.deleteCard),this.api.deleteArticle(this.buttonDelete.id).then(()=>{this.buttonDelete.classList.remove("card__button-icon_blue"),this.buttonDelete.removeAttribute("id"),this._view.querySelector(".card__button-icon").classList.add("card__button-icon_grey"),this.setEventListeners()}).catch(e=>{alert(e)})},this.setEventListenersInfo=e=>{if(!window.localStorage.getItem("user")&&e.target.classList.contains("card__button-icon_greyq")){this._view.querySelector(".card__button-info").classList.remove("card__button-info_disactive")}},this.setEventListenersInfoRemoove=e=>{if(!window.localStorage.getItem("user")&&e.target.classList.contains("card__button-icon_greyq")){this._view.querySelector(".card__button-info").classList.add("card__button-info_disactive")}},this.remove=()=>{this._view.querySelector(".card__button-icon_greyq").removeEventListener("mouseover",this.setEventListenersInfo),this._view.querySelector(".card__button-icon_greyq").removeEventListener("mouseout",this.setEventListenersInfo)}}}});