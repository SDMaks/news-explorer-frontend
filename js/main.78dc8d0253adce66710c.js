!function(t){var e={};function n(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(s,i,function(e){return t[e]}.bind(null,i));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=52)}([function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n(28))},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));class s{constructor(t){this.apiRespond=t=>{if(t.ok){return t.json()}return t.json().then(Promise.reject.bind(Promise))},this.signup=(t,e,n)=>fetch(this.url+"/signup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e,name:n})}).then(t=>this.apiRespond(t)),this.signin=(t,e)=>fetch(this.url+"/signin",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})}).then(t=>this.apiRespond(t)),this.getUser=()=>fetch(this.url+"/users/me",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(t=>this.apiRespond(t)),this.logOutUser=()=>fetch(this.url+"/logout",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}).then(t=>this.apiRespond(t)),this.createArticle=(t,e,n,s,i,r,o)=>fetch(this.url+"/articles",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword:t,title:e,text:n,date:s,source:i,link:r,image:o})}).then(t=>this.apiRespond(t)),this.deleteArticle=t=>fetch(`${this.url}/articles/${t}`,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}}).then(t=>this.apiRespond(t)),this.getArticles=()=>fetch(this.url+"/articles",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(t=>this.apiRespond(t)),this.url=t}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var s=n(11);t.exports=!s((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));class s{constructor(t,e,n,s,i,r){this.popUpButtonOpen=t,this.popUpButtonClose=e,this.body=n,this.mask=s,this.menu=i,this.menuButtonLogoOut=r,this.imageValue="./images/logout-white.png",this.imageValueClose="./images/logout-black.png"}setEventListeners(){this.popUpButtonOpen.addEventListener("click",()=>{this.openEventHeader()}),this.popUpButtonClose.addEventListener("click",()=>{this.closeEventHeader()})}openEventHeader(){this.popUpButtonOpen.classList.remove("header__popup-button_active"),this.popUpButtonClose.classList.add("header__popup-button-close_active"),this.menu.classList.add("menu_active"),this.body.classList.add("body_mobile-fixed-popup"),this.mask.classList.add("mobile-popup-mask_active"),this.renderButton()}closeEventHeader(){this.popUpButtonOpen.classList.add("header__popup-button_active"),this.popUpButtonClose.classList.remove("header__popup-button-close_active"),this.menu.classList.remove("menu_active"),this.body.classList.remove("body_mobile-fixed-popup"),this.mask.classList.remove("mobile-popup-mask_active"),this.renderButtonClose()}renderButton(){"save-news"===this.body.id&&window.matchMedia("(max-width: 767px)").matches&&(this.menuButtonLogoOut.src=""+this.imageValue)}renderButtonClose(){"save-news"===this.body.id&&(this.menuButtonLogoOut.src=""+this.imageValueClose)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));class s{constructor(t,e,n,s,i,r){this.userButtonLogIn=t=>{this.menuButtonSpan.textContent=t,this.headerRenderLogIn()},this.userButtonLogOut=()=>{this.menuButtonSpan.textContent=""},this.userNameNews=t=>{this.menuButtonSpan.textContent=t},this.liSaveArticles=t,this.liAutorization=e,this.liLogOut=n,this.menuButtonSpan=s,this.api=i,this.bodyMain=r}headerRenderLogIn(){this.liSaveArticles.classList.remove("log-out"),this.liAutorization.classList.add("log-out"),this.liLogOut.classList.remove("log-out")}headerRenderLogOut(){"main-page"===this.bodyMain.id?(this.liSaveArticles.classList.add("log-out"),this.liAutorization.classList.remove("log-out"),this.liLogOut.classList.add("log-out"),this.userButtonLogOut()):"save-news"===this.bodyMain.id&&(this.userButtonLogOut(),window.location.href="./")}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));class s{constructor(t,e,n){this.authorizationUser=()=>{this.api.getUser().then(t=>{this.localStorareRecording(t.name,t),this.setEventlisenerUser()}).catch(t=>{alert(t)})},this.authorizationUserLogOut=t=>{if(t.currentTarget.classList.contains("menu__button")){window.confirm("Вы действительно хотите выйти?")&&this.api.logOutUser().then(()=>{this.localStorareClear(),this.headerRender.headerRenderLogOut(),window.location.href="./",this.removeEventlisenerUser()}).catch(t=>{alert(t)})}},this.api=t,this.menuButton=e,this.headerRender=n}localStorareRecording(t,e){window.localStorage.setItem(t,e),window.localStorage.setItem("user",t)}localStorareClear(){window.localStorage.clear()}userNameNews(t){const e=window.localStorage.getItem("user");this.headerRender.userNameNews(e),t.textContent=e}setEventlisenerUser(){this.menuButton.addEventListener("click",()=>this.authorizationUserLogOut(event))}removeEventlisenerUser(){this.menuButton.removeEventListener("click",this.authorizationUserLogOut)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));class s{constructor(t,e,n){i.call(this),this.api=t,this._createCardFunction=e,this.newsCardGrid=n}}var i=function(){this.add=(t,e,n,s,i,r,o,a,c,u,l,d)=>{this.card=this._createCardFunction(t,e,n,s,i,r,o,a,c,u,l,d).create(),this.newsCardGrid.appendChild(this.card)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));class s{constructor(t,e,n,s,r,o,a,c,u,l,d,h){i.call(this),this.keyword=t,this.title=e,this.text=n,this.date=s,this.source=r,this.link=o,this.image=a,this.section=c,this.gridContainer=u,this.api=l,this.idCard=d,this.renderfunction=h,this.imageValueError="./images/test_1.png",this.messageToLogIn="Войдите, чтобы сохранять статьи",this.idCard=d}setEventListeners(){"news-card-saved"===this.section.id?(this.buttonDeleteSave=this._view.querySelector(".card__button-icon-delete"),this.buttonDeleteSave.addEventListener("click",this.deleteCardeSaved)):"news-card"===this.section.id&&(this._view.querySelector(".card__button-icon_grey").addEventListener("click",this.save),this._view.querySelector(".card__button-icon_greyq").addEventListener("mouseover",this.setEventListenersInfo),this._view.querySelector(".card__button-icon_greyq").addEventListener("mouseout",this.setEventListenersInfoRemoove))}}var i=function(){this.create=()=>{const t=document.createElement("div");t.classList.add("card");const e=document.createElement("a");e.classList.add("card__article-container"),e.setAttribute("target","_blank"),e.setAttribute("href",""+this.link);const n=document.createElement("img");n.classList.add("card__image"),n.setAttribute("alt","картинка к статье"),n.setAttribute("onerror",`this.onerror=null;this.src='${this.imageValueError}';`),n.setAttribute("src",""+this.image);const s=document.createElement("div");s.classList.add("card__button-container"),"news-card-saved"===this.section.id?s.classList.add("card__button-container_position"):"news-card"===this.section.id&&s.classList.add("card__button-container_position-main");const i=document.createElement("p");i.classList.add("card__article-date"),i.textContent=this.date;const r=document.createElement("h2");r.classList.add("card__article-title"),r.textContent=this.title;const o=document.createElement("p");o.classList.add("card__article-text"),o.textContent=this.text;const a=document.createElement("p");a.classList.add("card__article-url"),a.textContent=this.source,e.appendChild(i),e.appendChild(r),e.appendChild(o),e.appendChild(a);const c=document.createElement("span");"news-card"===this.section.id?(c.classList.add("card__button-info_disactive"),c.classList.add("card__button-info"),c.textContent=this.messageToLogIn):"news-card-saved"===this.section.id&&(c.classList.add("card__button-info-card"),c.textContent=this.keyword);const u=document.createElement("button");return"news-card"===this.section.id?(u.classList.add("card__button-icon"),u.classList.add("card__button-icon_grey"),u.classList.add("card__button-icon_greyq")):"news-card-saved"===this.section.id&&(u.classList.add("card__button-icon-delete"),u.id=this.idCard),s.appendChild(c),s.appendChild(u),t.appendChild(s),t.appendChild(n),t.appendChild(e),this._view=t,this.cardButtonIcon=u,this.linkCard=e.getAttribute("href"),this.imageCard=n.getAttribute("src"),this.dateCard=i.textContent,this.titleCard=r.textContent,this.textCard=o.textContent,this.sourceCard=a.textContent,this.keywordCard=this.keyword,this.cardButtonIconCard=u,this.cardButtonInfoCard=c,this.setEventListeners(),this._view},this.deleteCardeSaved=t=>{"card__button-icon-delete"===t.target.className&&this.api.deleteArticle(this.buttonDeleteSave.id).then(()=>{t.target.closest(".card").remove(),this.renderfunction()}).catch(t=>{alert(t)})},this.save=()=>{window.localStorage.getItem("user")&&(this.disactiveDeleteButton=this._view.querySelector(".card__button-icon_grey"),this.button=this._view.querySelector(".card__button-icon"),this.disactiveInfo=this._view.querySelector(".card__button-info_disactive"),this.api.createArticle(this.keywordCard,this.titleCard,this.textCard,this.dateCard,this.sourceCard,this.linkCard,this.imageCard).then(t=>(this.button.id=t.data._id,this.button.classList.add("card__button-icon_blue"),this._view.querySelector(".card__button-icon_grey").removeEventListener("click",this.save),this.button.classList.remove("card__button-icon_grey"),this.buttonDelete=this._view.querySelector(".card__button-icon_blue"),this.buttonDelete)).then(t=>{this.deleteCardEventListener(t)}).catch(t=>{alert(t)}))},this.deleteCardEventListener=t=>{t.addEventListener("click",this.deleteCard)},this.deleteCard=()=>{this.buttonDelete.removeEventListener("click",this.deleteCard),this.api.deleteArticle(this.buttonDelete.id).then(()=>{this.buttonDelete.classList.remove("card__button-icon_blue"),this.buttonDelete.removeAttribute("id"),this._view.querySelector(".card__button-icon").classList.add("card__button-icon_grey"),this.setEventListeners()}).catch(t=>{alert(t)})},this.setEventListenersInfo=t=>{if(!window.localStorage.getItem("user")&&t.target.classList.contains("card__button-icon_greyq")){this._view.querySelector(".card__button-info").classList.remove("card__button-info_disactive")}},this.setEventListenersInfoRemoove=t=>{if(!window.localStorage.getItem("user")&&t.target.classList.contains("card__button-icon_greyq")){this._view.querySelector(".card__button-info").classList.add("card__button-info_disactive")}},this.remove=()=>{this._view.querySelector(".card__button-icon_greyq").removeEventListener("mouseover",this.setEventListenersInfo),this._view.querySelector(".card__button-icon_greyq").removeEventListener("mouseout",this.setEventListenersInfo)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));const s={url:"https://www.api.emnews.students.nomoreparties.space"}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var s=n(3),i=n(14),r=n(18);t.exports=s?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var s=n(30),i=n(32);t.exports=function(t){return s(i(t))}},function(t,e,n){var s=n(3),i=n(20),r=n(21),o=n(19),a=Object.defineProperty;e.f=s?a:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var s=n(35),i=n(36);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.4.1",mode:s?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var s=n(0),i=n(12);t.exports=function(t,e){try{i(s,t,e)}catch(n){s[t]=e}return e}},function(t,e,n){var s=n(3),i=n(29),r=n(18),o=n(13),a=n(19),c=n(2),u=n(20),l=Object.getOwnPropertyDescriptor;e.f=s?l:function(t,e){if(t=o(t),e=a(e,!0),u)try{return l(t,e)}catch(t){}if(c(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var s=n(4);t.exports=function(t,e){if(!s(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!s(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!s(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!s(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var s=n(3),i=n(11),r=n(33);t.exports=!s&&!i((function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var s=n(4);t.exports=function(t){if(!s(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){var s=n(15);t.exports=s("native-function-to-string",Function.toString)},function(t,e){t.exports={}},function(t,e,n){var s=n(2),i=n(41),r=n(17),o=n(14);t.exports=function(t,e){for(var n=i(e),a=o.f,c=r.f,u=0;u<n.length;u++){var l=n[u];s(t,l)||a(t,l,c(e,l))}}},function(t,e){var n=Math.ceil,s=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?s:n)(t)}},function(t,e,n){"use strict";var s=n(27),i=n(3),r=n(0),o=n(2),a=n(4),c=n(14).f,u=n(24),l=r.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},h=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof h?new l(t):void 0===t?l():l(t);return""===t&&(d[e]=!0),e};u(h,l);var p=h.prototype=l.prototype;p.constructor=h;var v=p.toString,f="Symbol(test)"==String(l("test")),m=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var t=a(this)?this.valueOf():this,e=v.call(t);if(o(d,t))return"";var n=f?e.slice(7,-1):e.replace(m,"$1");return""===n?void 0:n}}),s({global:!0,forced:!0},{Symbol:h})}},function(t,e,n){var s=n(0),i=n(17).f,r=n(12),o=n(34),a=n(16),c=n(24),u=n(51);t.exports=function(t,e){var n,l,d,h,p,v=t.target,f=t.global,m=t.stat;if(n=f?s:m?s[v]||a(v,{}):(s[v]||{}).prototype)for(l in e){if(h=e[l],d=t.noTargetGet?(p=i(n,l))&&p.value:n[l],!u(f?l:v+(m?".":"#")+l,t.forced)&&void 0!==d){if(typeof h==typeof d)continue;c(h,d)}(t.sham||d&&d.sham)&&r(h,"sham",!0),o(n,l,h,t)}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var s={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!s.call({1:2},1);e.f=r?function(t){var e=i(this,t);return!!e&&e.enumerable}:s},function(t,e,n){var s=n(11),i=n(31),r="".split;t.exports=s((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?r.call(t,""):Object(t)}:Object},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var s=n(0),i=n(4),r=s.document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,n){var s=n(0),i=n(15),r=n(12),o=n(2),a=n(16),c=n(22),u=n(37),l=u.get,d=u.enforce,h=String(c).split("toString");i("inspectSource",(function(t){return c.call(t)})),(t.exports=function(t,e,n,i){var c=!!i&&!!i.unsafe,u=!!i&&!!i.enumerable,l=!!i&&!!i.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||r(n,"name",e),d(n).source=h.join("string"==typeof e?e:"")),t!==s?(c?!l&&t[e]&&(u=!0):delete t[e],u?t[e]=n:r(t,e,n)):u?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||c.call(this)}))},function(t,e){t.exports=!1},function(t,e,n){var s=n(0),i=n(16),r=s["__core-js_shared__"]||i("__core-js_shared__",{});t.exports=r},function(t,e,n){var s,i,r,o=n(38),a=n(0),c=n(4),u=n(12),l=n(2),d=n(39),h=n(23),p=a.WeakMap;if(o){var v=new p,f=v.get,m=v.has,_=v.set;s=function(t,e){return _.call(v,t,e),e},i=function(t){return f.call(v,t)||{}},r=function(t){return m.call(v,t)}}else{var g=d("state");h[g]=!0,s=function(t,e){return u(t,g,e),e},i=function(t){return l(t,g)?t[g]:{}},r=function(t){return l(t,g)}}t.exports={set:s,get:i,has:r,enforce:function(t){return r(t)?i(t):s(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e,n){var s=n(0),i=n(22),r=s.WeakMap;t.exports="function"==typeof r&&/native code/.test(i.call(r))},function(t,e,n){var s=n(15),i=n(40),r=s("keys");t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){var n=0,s=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+s).toString(36)}},function(t,e,n){var s=n(42),i=n(44),r=n(50),o=n(21);t.exports=s("Reflect","ownKeys")||function(t){var e=i.f(o(t)),n=r.f;return n?e.concat(n(t)):e}},function(t,e,n){var s=n(43),i=n(0),r=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?r(s[t])||r(i[t]):s[t]&&s[t][e]||i[t]&&i[t][e]}},function(t,e,n){t.exports=n(0)},function(t,e,n){var s=n(45),i=n(49).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return s(t,i)}},function(t,e,n){var s=n(2),i=n(13),r=n(46).indexOf,o=n(23);t.exports=function(t,e){var n,a=i(t),c=0,u=[];for(n in a)!s(o,n)&&s(a,n)&&u.push(n);for(;e.length>c;)s(a,n=e[c++])&&(~r(u,n)||u.push(n));return u}},function(t,e,n){var s=n(13),i=n(47),r=n(48),o=function(t){return function(e,n,o){var a,c=s(e),u=i(c.length),l=r(o,u);if(t&&n!=n){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},function(t,e,n){var s=n(25),i=Math.min;t.exports=function(t){return t>0?i(s(t),9007199254740991):0}},function(t,e,n){var s=n(25),i=Math.max,r=Math.min;t.exports=function(t,e){var n=s(t);return n<0?i(n+e,0):r(n,e)}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var s=n(11),i=/#|\.prototype\./,r=function(t,e){var n=a[o(t)];return n==u||n!=c&&("function"==typeof e?s(e):!!e)},o=r.normalize=function(t){return String(t).replace(i,".").toLowerCase()},a=r.data={},c=r.NATIVE="N",u=r.POLYFILL="P";t.exports=r},function(t,e,n){"use strict";n.r(e);class s{constructor(t,e,n,s,i,r,o){this.serverMessage=t,this.buttonPopupMobileClose=e,this.popupButton=s,this.popup=n,this.body=i,this.popUpNext=r,this.form=o}closeEvent(){this.popupButton.addEventListener("click",()=>{this.close()}),this.closeEsc(),this.body.addEventListener("click",t=>{t.target.classList.contains("popup_is-opened")&&this.close()})}openEvent(){this.popup.classList.toggle("popup_is-opened"),this.body.classList.add("body_mask"),this.serverMessage.textContent="",this.clearContent()}openCloseEventNext(){this.popUpNext.classList.toggle("popup_is-opened")}closeEsc(){this.body.addEventListener("keydown",t=>{"Escape"===t.key&&this.close()})}clearContent(){this.form.reset()}close(){this.popup.classList.remove("popup_is-opened"),this.body.classList.remove("body_mask"),this.formOpen(),this.clearContent(),this.removeEventListeners()}closeNext(){this.popup.classList.remove("popup_is-opened"),this.clearContent(),this.removeEventListeners()}formOpen(){this.body.classList.contains("body_mask")?this.buttonPopupMobileClose.classList.remove("header__popup-button-close_active"):this.buttonPopupMobileClose.classList.add("header__popup-button-close_active")}removeEventListeners(){this.body.removeEventListener("keydown",this.closeEsc),this.popupButton.removeEventListener("click",this.close)}}class i extends s{constructor(t,e,n,s,i,r,o,a,c){super(t,e,n,s,i,r,o),this.addButton=a,this.popUpNextButton=c}setEventListeners(){this.addButton.addEventListener("click",()=>{super.openEvent(),super.formOpen(),this.removeEventListeners()})}setEventListenersNext(){this.popUpNextButton.addEventListener("click",()=>{super.openCloseEventNext(),this.closeForm(),this.removeEventListeners()})}closeForm(){super.closeNext()}removeEventListeners(){this.addButton.removeEventListener("click",super.openEvent)}}class r extends s{constructor(t,e,n,s,i,r,o,a,c){super(t,e,n,s,i,r,o),this.buttonSwitchFromSuccessInfo=a,this.signUpPopUp=c}openPopUp(){super.openEvent(),this.registrationClose(),this.setEventListeners()}setEventListeners(){this.buttonSwitchFromSuccessInfo.addEventListener("click",()=>{super.openCloseEventNext(),super.openEvent()})}registrationClose(){this.signUpPopUp.classList.remove("popup_is-opened")}}var o=n(5);class a{constructor(t,e,n,s,i,r,o,a,c,u){this.inputsArr=t,this.Validator=e,this.template=n,this.button=s,this.Arr=i,this.popUp=r,this.inputs=o,this.formButtonOpen=a,this.inputErrorMessages=c,this.switchForm=u}render(){this.view=this.template;new this.Validator(this.inputsArr,this.inputErrorMessages,this.view,this.button,this.formButtonOpen,this.Arr).setEventListeners(this.popUp,this.inputs,this.view,this.switchForm)}}n(26);class c{constructor(t,e,n,s,i,r,o,a,c,l,d,h){u.call(this),this.newsApi=t,this.searchInput=e,this.searchButton=n,this.searchForm=s,this.noResultSection=i,this.loadingSection=r,this.newsCardSection=a,this.newsCardGrid=c,this.apiRequest=l,this.createCardFunctionAdd=d,this.containerAdd=h}setEventListenersInput(){this.searchForm.addEventListener("input",t=>{t.preventDefault();const e=t.currentTarget.querySelector(".header__input");t.target===e&&(e.validity.valid?(this.searchButton.classList.add("header__button_blue"),this.searchButton.removeAttribute("disabled"),this.setEventListenersNews()):(this.searchButton.classList.remove("header__button_blue"),this.searchButton.setAttribute("disabled",!0),this.keyWord=e.value))})}}var u=function(){this.validation=t=>!t.validity.patternMismatch&&!t.validity.valueMissing,this.newsRequest=t=>{t.preventDefault(),this.keyword=this.searchInput.value,this.noResultSection.classList.contains("no-result_disabled")&&(this.checknodeChildren(),this.noResultSection.classList.add("no-result_disabled")),this.checknodeChildren(),this.noResultSection.classList.add("no-result_disabled"),this.loadingSection.classList.remove("loading_disabled"),this.newsApi.getNews(this.searchInput.value).then(t=>{this.removeAddButton(),this.resultProcessing(t.articles)}).catch(t=>{alert(t)}).finally(()=>{this.loadingSection.classList.add("loading_disabled"),this.searchForm.reset(),this.searchButton.classList.remove("header__button_blue"),this.searchButton.setAttribute("disabled",!0)})},this.resultProcessing=t=>{this.removeEventListenersNews();const e=t.length;0===e?(this.noResultSection.classList.remove("no-result_disabled"),this.newsCardSection.classList.add("news-card_disabled")):e>0&&(this.newsCardSection.classList.remove("news-card_disabled"),e<=3?this.arrProcessing(t):e>3&&(this.renderButton(),this.arrThree(t),this.func(t)))},this.arrThree=t=>{const e=[];for(let n=0;n<3;n++)e.push(t[n]),2===n&&this.arrProcessing(e)},this.func=t=>{let e=3,n=6;this.newsCardAddButton=this.containerAdd.querySelector(".news-card__add-button"),this.newsCardAddButton.addEventListener("click",s=>{if(s.target.classList.contains("news-card__add-button"))if(n<t.length){const s=[];for(;e<n;e++)if(s.push(t[e]),e===n-1)return this.arrProcessing(s),e+=1,n+=3,n}else if(n===t.length){const s=[];for(;e<n;e++)if(s.push(t[e]),e===n-1)return this.arrProcessing(s),this.removeAddButton(),e+=1,n+=3,newsCardAddButton.setAttribute("disabled",!0),n}else if(n>t.length){const e=[];let n=t.length-t.length%3;for(;n<t.length;n++)if(e.push(t[n]),n===t.length-1)return this.arrProcessing(e),void this.removeAddButton()}})},this.arrProcessing=t=>{t.forEach(t=>{const e=t.publishedAt.split("T")[0];this.createCardFunctionAdd.add(this.keyword,t.title,t.description,e,t.source.name,t.url,t.urlToImage,this.newsCardSection,this.gridContainer,this.apiRequest,null,null)})},this.removeAddButton=()=>{for(;this.containerAdd.firstChild;)this.containerAdd.removeChild(this.containerAdd.firstChild)},this.setEventListenersNews=()=>{this.searchForm.addEventListener("submit",this.newsRequest)},this.removeEventListenersNews=()=>{this.searchForm.addEventListener("submit",this.newsRequest)},this.renderButton=()=>{const t=document.createElement("button");t.classList.add("button"),t.classList.add("news-card__add-button"),t.textContent="Показать еще",this.containerAdd.appendChild(t)},this.checknodeChildren=()=>{this.newsCardSection.firstElementChild&&(this.newsCardGrid.textContent="")}},l=n(6);class d{constructor(t,e,n,s){this.createUser=(t,e,n,s,i)=>{t.preventDefault(),this.attributeSet(e,n,s),this.api.signup(e.value,n.value,s.value).then(()=>{this.popupInformation.openPopUp()}).catch(t=>{i.textContent=t.message}).finally(()=>{this.attributeRemove(e,n,s)})},this.loginUser=(t,e,n,s,i,r,o)=>{t.preventDefault(),this.attributeSet(e,n),this.api.signin(e.value,n.value).then(t=>{const e=t.name,{token:n}=t;this.authorizeUser.localStorareRecording(e,n),s.userButtonLogIn(e),r.closeEventHeader(),i.closeForm()}).catch(t=>{o.textContent=t.message}).finally(()=>{this.attributeRemove(e,n)})},this.api=t,this.apiNews=e,this.popupInformation=n,this.authorizeUser=s}attributeSet(...t){t.forEach(t=>{t.setAttribute("readonly","readonly")})}attributeRemove(...t){t.forEach(t=>{t.removeAttribute("readonly","readonly")})}setEventListenersSignUp(t,e,n,s,i){t.addEventListener("submit",t=>{this.createUser(t,e,n,s,i)})}setEventListenersSignIn(t,e,n,s,i,r,o){t.addEventListener("submit",t=>{this.loginUser(t,e,n,s,i,r,o)})}}var h=n(7),p=n(8);class v{constructor(t,e,n,s,i,r){f.call(this),this.inputsArrError=t,this._inputErrorMessages=e,this.form=n,this.button=s,this.formButtonOpen=i,this.arr=r}checkValidity(t){return t.validity.patternMismatch&&"password"===t.type?(t.setCustomValidity(this._inputErrorMessages.parolError),this.setError(t),!1):t.validity.valueMissing?(t.setCustomValidity(this._inputErrorMessages.emptyInputError),this.setError(t),!1):t.validity.patternMismatch&&"email"===t.type?(t.setCustomValidity(this._inputErrorMessages.emailError),this.setError(t),!1):t.validity.tooShort||t.validity.tooLong?(t.setCustomValidity(this._inputErrorMessages.inputErrorShortLong),this.setError(t),!1):(t.setCustomValidity(""),this.setError(t),!0)}}var f=function(){this.setError=t=>{t.nextElementSibling.innerText=t.validationMessage},this.setEventListeners=(t,e,n,s)=>{const i=Array.from(e);this.form.addEventListener("input",t=>{this.button=t.currentTarget.querySelector("button"),i.forEach(e=>{const n=e;t.target===n?this.checkValidity(n):n.textContent=""}),i.every(t=>t.validity.valid)?this.setSubmitButtonState(this.button,!0):this.setSubmitButtonState(this.button,!1)}),this.formButtonOpen.addEventListener("click",()=>{this.arr.forEach(t=>{this.setSubmitButtonState(t,!1)}),this.resetInputs(t,this.inputsArrError,n)}),s.addEventListener("click",()=>{this.arr.forEach(t=>{this.setSubmitButtonState(t,!1)}),this.resetInputs(t,this.inputsArrError,n)})},this.resetInputs=(t,e,n)=>{t.classList.contains("popup_is-opened")&&e.forEach(t=>{t.innerText="",n.reset()})},this.setSubmitButtonState=(t,e)=>{e?(t.removeAttribute("disabled"),t.classList.add("popup__form-button_blue"),t.classList.remove("popup__form-button_grey")):(t.setAttribute("disabled",!0),t.classList.remove("popup__form-button_blue"),t.classList.add("popup__form-button_grey"))}},m=n(9),_=n(10),g=n(1);class b{constructor(t,e,n){this.dateRequest=()=>{const t=new Date;return`${t.getFullYear()}-${t.getMonth()}-${t.getDate()}`},this.getNews=t=>fetch(`${this.URL_NEWS}/v2/everything?q=${t}&from=${this.dateRequest}&pageSize=${this.NUMBER_ARTICLES}&apiKey=${this.INDIVIDUAL_TOKEN}`).then(t=>t.json()).then(t=>t),this.URL_NEWS=t,this.NUMBER_ARTICLES=e,this.INDIVIDUAL_TOKEN=n}}const y={parolError:"Пароль должен быть от 8 символов и без пробелов",emptyInputError:"Это обязательное поле",emailError:"Почта введена не корректно",inputErrorShortLong:"Поле для ввода от 2 до 30 символов"},L=document.querySelector(".body"),S=document.querySelector("#main-page"),E=(L.querySelector(".popup"),L.querySelector("#buttonAutirization")),w=L.querySelector("#signin_popup"),C=L.querySelector("#registration_success"),x=w.querySelector("#close_signin_popup"),q=w.querySelector("#switch_form-registration"),B=C.querySelector("#close_registration_popup"),A=C.querySelector(".popup__switch-blue"),O=L.querySelector(".header__popup-button"),k=L.querySelector(".header__popup-button-close"),I=L.querySelector(".mobile-popup-mask"),U=L.querySelector(".menu"),R=L.querySelector(".menu__button-logo-out"),N=L.querySelector("#signup_popup"),T=N.querySelector("#close_signup_popup"),j=N.querySelector("#switch_form-enter"),M=document.forms.signinUser,P=document.forms.signupUser,D=M.querySelectorAll(".popup__input"),F=P.querySelectorAll(".popup__input"),V=M.querySelector("#popup_button_signin"),z=P.querySelector("#popup_button_signup"),$=document.querySelectorAll(".popup__form-button"),G=L.querySelectorAll(".popup__input-error-message"),H=Array.from(G),W=L.querySelector("#buttonAutirization"),K=P.querySelector("#input-signup-email"),J=P.querySelector("#input-signup-parol"),Y=P.querySelector("#input-signup-name"),Q=M.querySelector("#input-signin-email"),X=M.querySelector("#input-signin-parol"),Z=L.querySelector(".menu__list"),tt=(Z.querySelector("#li-main"),Z.querySelector("#li-save-articles")),et=Z.querySelector("#li-autorization"),nt=Z.querySelector("#li-log-out"),st=Z.querySelector(".menu__button-span"),it=Z.querySelector("#menuButton"),rt=(Z.querySelector("#menuButtonNews"),N.querySelector("#respond-serever-registration")),ot=w.querySelector("#respond-serever-enter"),at=S.querySelector(".header__search-form"),ct=at.querySelector(".header__input"),ut=at.querySelector("#news-button"),lt=S.querySelector(".loading"),dt=S.querySelector(".no-result"),ht=S.querySelector("#news-card"),pt=document.querySelector(".news-card__grid"),vt=S.querySelector(".news-card__add-button"),ft=S.querySelector("#container");!function(){const t=new b("https://nomoreparties.co/news","11","05e26c31c6974b348af622a37d0288b6"),e=new g.a(_.a.url),n=new i(ot,k,w,x,L,N,M,E,q);n.setEventListeners(),n.closeEvent(),n.setEventListenersNext();const s=new i(rt,k,N,T,L,w,P,E,j);s.closeEvent(),s.setEventListenersNext();const u=new r(rt,k,C,B,L,w,P,A,N);u.closeEvent();const f=new o.a(O,k,L,I,U,R);f.setEventListeners();new a(H,v,M,V,$,w,D,W,y,j).render();new a(H,v,P,z,$,N,F,W,y,q).render();const G=new l.a(tt,et,nt,st,g.a,S),Z=new h.a(e,it,G);Z.setEventlisenerUser();const mt=new p.a(e,(t,e,n,s,i,r,o,a,c,u,l,d)=>new m.a(t,e,n,s,i,r,o,a,c,u,l,d),pt),_t=new d(e,t,u,Z);_t.setEventListenersSignUp(P,K,J,Y,rt),e.getUser().then(t=>{G.userButtonLogIn(t.name),G.headerRenderLogIn()}).catch(t=>{"Необходима авторизация"===t.message?(G.headerRenderLogOut(),Z.localStorareClear()):"Необходима авторизация"!==t.message&&alert(t.message)}),_t.setEventListenersSignIn(M,Q,X,G,n,f,ot);new c(t,ct,ut,at,dt,lt,vt,ht,pt,e,mt,ft).setEventListenersInput()}()}]);